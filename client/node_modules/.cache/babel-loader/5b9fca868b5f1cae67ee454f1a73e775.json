{"ast":null,"code":"import _objectSpread from \"D:/My Program/Teammate/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"D:/My Program/Teammate/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:/My Program/Teammate/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\My Program\\\\Teammate\\\\project\\\\client\\\\src\\\\components\\\\viewMap.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { MapContainer, TileLayer, FeatureGroup } from \"react-leaflet\";\nimport { EditControl } from \"react-leaflet-draw\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-draw/dist/leaflet.draw.css\";\nimport { useRef, useState } from \"react\";\nimport osm from \"./osmprov\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction MyMap() {\n  _s();\n\n  var center = [-7.770905, 110.377637];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      mapLayer = _useState2[0],\n      setmapLayer = _useState2[1];\n\n  var ZoomLevel = 20;\n  var mapRef = useRef();\n\n  var _onCreate = function _onCreate(e) {\n    console.log(e);\n    var layer = e.layer;\n    var _leaflet_id = layer._leaflet_id;\n    setmapLayer(function (layers) {\n      return [].concat(_toConsumableArray(layers), [{\n        id: _leaflet_id,\n        latlngs: layer.getLatLngs()[0]\n      }]);\n    });\n  };\n\n  var _onEdited = function _onEdited(e) {\n    console.log(e);\n    var _layers = e.layers._layers;\n    Object.values(_layers).map(function (_ref) {\n      var _leaflet_id = _ref._leaflet_id,\n          editing = _ref.editing;\n      setmapLayer(function (layers) {\n        return layers.map(function (l) {\n          return l.id === _leaflet_id ? _objectSpread(_objectSpread({}, l), {}, {\n            latlngs: _objectSpread({}, editing.latlngs[0])\n          }) : l;\n        });\n      });\n    });\n  };\n\n  var _onDeleted = function _onDeleted(e) {\n    console.log(e);\n    var _layers = e.layers._layers;\n    Object.values(_layers).map(function (_ref2) {\n      var _leaflet_id = _ref2._leaflet_id;\n      setmapLayer(function (layers) {\n        return layers.filter(function (l) {\n          return l.id !== _leaflet_id;\n        });\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(MapContainer, {\n          center: center,\n          zoom: ZoomLevel,\n          children: [/*#__PURE__*/_jsxDEV(FeatureGroup, {\n            children: /*#__PURE__*/_jsxDEV(EditControl, {\n              position: \"topright\",\n              onEdited: _onEdited,\n              onCreated: _onCreate,\n              onDeleted: _onDeleted\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TileLayer, {\n            url: \"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=IRZOzRLVldKCJpJ8qS0V\",\n            attribution: \"<a href=\\\"https://www.maptiler.com/copyright/\\\" target=\\\"_blank\\\">\\xA9 MapTiler</a> <a href=\\\"https://www.openstreetmap.org/copyright\\\" target=\\\"_blank\\\">\\xA9 OpenStreetMap contributors</a>\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(MyMap, \"Q2iVMFWSmz6/Ms44GS5x+msbL3g=\");\n\n_c = MyMap;\nexport default MyMap;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyMap\");","map":{"version":3,"sources":["D:/My Program/Teammate/project/client/src/components/viewMap.js"],"names":["React","MapContainer","TileLayer","FeatureGroup","EditControl","useRef","useState","osm","MyMap","center","mapLayer","setmapLayer","ZoomLevel","mapRef","_onCreate","e","console","log","layer","_leaflet_id","layers","id","latlngs","getLatLngs","_onEdited","_layers","Object","values","map","editing","l","_onDeleted","filter"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nimport { MapContainer, TileLayer, FeatureGroup } from \"react-leaflet\";\r\nimport { EditControl } from \"react-leaflet-draw\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"leaflet-draw/dist/leaflet.draw.css\";\r\nimport { useRef, useState } from \"react\";\r\nimport osm from \"./osmprov\";\r\n\r\n\r\nfunction MyMap() {\r\n  const center = [-7.770905, 110.377637];\r\n  const [mapLayer, setmapLayer] = useState([]);\r\n  const ZoomLevel = 20;\r\n  const mapRef = useRef();\r\n  \r\n  const _onCreate = e => {\r\n    console.log(e);\r\n\r\n    const {layer} = e;\r\n    const { _leaflet_id } = layer;\r\n    setmapLayer((layers) => [\r\n      ...layers,\r\n      {id: _leaflet_id, latlngs: layer.getLatLngs()[0]},\r\n    ]);\r\n  }\r\n\r\n  const _onEdited = e => {\r\n    console.log(e);\r\n\r\n    const {\r\n      layers: { _layers },\r\n    } = e;\r\n\r\n    Object.values(_layers).map(({_leaflet_id, editing}) => {\r\n      setmapLayer((layers) =>\r\n        layers.map((l) =>\r\n          l.id === _leaflet_id\r\n            ? {...l, latlngs: {...editing.latlngs[0]}} : l\r\n        )\r\n      );\r\n    });\r\n  };\r\n\r\n  const _onDeleted = e => {\r\n    console.log(e);\r\n    const {\r\n      layers: {_layers},\r\n    } = e;\r\n\r\n    Object.values(_layers).map(({_leaflet_id}) => {\r\n      setmapLayer((layers) => layers.filter((l) => l.id !== _leaflet_id));\r\n    });\r\n  };\r\n\r\n  return(\r\n    <>\r\n      <div>\r\n        <div>\r\n          <MapContainer center={center} zoom={ZoomLevel}>\r\n            <FeatureGroup>\r\n              <EditControl\r\n                position='topright'\r\n                onEdited={_onEdited}\r\n                onCreated={_onCreate}\r\n                onDeleted={_onDeleted}\r\n              />\r\n            </FeatureGroup>\r\n            <TileLayer url=\"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=IRZOzRLVldKCJpJ8qS0V\" \r\n                      attribution='<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'/>\r\n          </MapContainer>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MyMap;\r\n"]},"metadata":{},"sourceType":"module"}